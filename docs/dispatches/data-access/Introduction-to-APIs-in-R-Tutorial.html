<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Peter Lawson, PhD">
<meta name="dcterms.date" content="2025-10-22">

<title>Introduction to APIs in R – JHU Data Services Data Dispatches</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-49bc3c4b80931dc08fb2eaed59da63be.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../../site_libs/datatables-binding-0.34.0/datatables.js"></script>
<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../logos/jhu-shield.png" alt="" class="navbar-logo light-content">
    <img src="../../logos/jhu-shield.png" alt="" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">JHU Data Services <strong>Data Dispatches</strong></span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jhu-data-services"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://dataservices.library.jhu.edu/"> <i class="bi bi-globe2" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-help" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Help</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-help">    
        <li>
    <a class="dropdown-item" href="https://github.com/jhu-data-services/data-dispatches/issues"><i class="bi bi-bug" role="img">
</i> 
 <span class="dropdown-text">Report an Issue</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../dataservices@jhu.edu"><i class="bi bi-envelope" role="img">
</i> 
 <span class="dropdown-text">Contact Data Services</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#load-libraries" id="toc-load-libraries" class="nav-link" data-scroll-target="#load-libraries">Load Libraries</a></li>
  </ul></li>
  <li><a href="#introduction-to-requests" id="toc-introduction-to-requests" class="nav-link" data-scroll-target="#introduction-to-requests">Introduction to Requests</a>
  <ul class="collapse">
  <li><a href="#set-the-url-for-the-api-and-set-our-endpoint-pokemon" id="toc-set-the-url-for-the-api-and-set-our-endpoint-pokemon" class="nav-link" data-scroll-target="#set-the-url-for-the-api-and-set-our-endpoint-pokemon">Set the url for the API and set our endpoint (<code>pokemon</code>)</a></li>
  <li><a href="#use-req_url_path_append-to-construct-the-endpoint-path" id="toc-use-req_url_path_append-to-construct-the-endpoint-path" class="nav-link" data-scroll-target="#use-req_url_path_append-to-construct-the-endpoint-path">Use <code>req_url_path_append()</code> to construct the endpoint path</a></li>
  <li><a href="#generate-a-response-by-performing-our-request-using-req_performrequest" id="toc-generate-a-response-by-performing-our-request-using-req_performrequest" class="nav-link" data-scroll-target="#generate-a-response-by-performing-our-request-using-req_performrequest">Generate a response by performing our request using <code>req_perform(request)</code></a></li>
  <li><a href="#request-a-specific-pokemon-endpoint" id="toc-request-a-specific-pokemon-endpoint" class="nav-link" data-scroll-target="#request-a-specific-pokemon-endpoint">Request a specific pokemon endpoint</a></li>
  </ul></li>
  <li><a href="#manipulating-json-data" id="toc-manipulating-json-data" class="nav-link" data-scroll-target="#manipulating-json-data">Manipulating <code>JSON</code> data</a>
  <ul class="collapse">
  <li><a href="#extract-data-from-a-json-into-a-tibble-dataframe" id="toc-extract-data-from-a-json-into-a-tibble-dataframe" class="nav-link" data-scroll-target="#extract-data-from-a-json-into-a-tibble-dataframe">Extract data from a <code>JSON</code> into a tibble (dataframe)</a></li>
  </ul></li>
  <li><a href="#pagination" id="toc-pagination" class="nav-link" data-scroll-target="#pagination">Pagination</a>
  <ul class="collapse">
  <li><a href="#using-pagination-to-request-data-for-100-pokemon" id="toc-using-pagination-to-request-data-for-100-pokemon" class="nav-link" data-scroll-target="#using-pagination-to-request-data-for-100-pokemon">Using pagination to request data for 100 pokemon</a></li>
  <li><a href="#lets-build-a-next-page-handler" id="toc-lets-build-a-next-page-handler" class="nav-link" data-scroll-target="#lets-build-a-next-page-handler">Let’s build a next page handler</a></li>
  <li><a href="#retreive-statistics-for-each-pokemon-through-multiple-api-calls" id="toc-retreive-statistics-for-each-pokemon-through-multiple-api-calls" class="nav-link" data-scroll-target="#retreive-statistics-for-each-pokemon-through-multiple-api-calls">Retreive statistics for each pokemon through multiple API calls</a></li>
  </ul></li>
  <li><a href="#api-key-privacy" id="toc-api-key-privacy" class="nav-link" data-scroll-target="#api-key-privacy">API key privacy</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introduction to APIs in R</h1>
<p class="subtitle lead">Introduction to APIs in R workshop by JHU Data Services - October 22nd, 2025</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Peter Lawson, PhD </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 22, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This document has the completed code for the <a href="https://dataservices.library.jhu.edu/">Johns Hopkins Data Services</a> October 22nd session <strong>Introduction to APIs in R</strong>.</p>
<section id="load-libraries" class="level3">
<h3 class="anchored" data-anchor-id="load-libraries">Load Libraries</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Library for working with RESTful APIs </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Libraries for data processing</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Library for viewing dataframe as HTML table</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="introduction-to-requests" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-requests">Introduction to Requests</h2>
<p>Use the <a href="https://pokeapi.co/">PokeAPI</a> to extract basic information about Pokémon using a series of API requests.</p>
<section id="set-the-url-for-the-api-and-set-our-endpoint-pokemon" class="level3">
<h3 class="anchored" data-anchor-id="set-the-url-for-the-api-and-set-our-endpoint-pokemon">Set the url for the API and set our endpoint (<code>pokemon</code>)</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>base_url <span class="ot">&lt;-</span> <span class="st">'https://pokeapi.co/api/v2/'</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>endpoint <span class="ot">&lt;-</span> <span class="st">'pokemon'</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="use-req_url_path_append-to-construct-the-endpoint-path" class="level3">
<h3 class="anchored" data-anchor-id="use-req_url_path_append-to-construct-the-endpoint-path">Use <code>req_url_path_append()</code> to construct the endpoint path</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>request <span class="ot">&lt;-</span> <span class="fu">request</span>(base_url) <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req_url_path_append</span>(endpoint)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We can see the get request formed by our request function:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>request</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;httr2_request&gt;
GET https://pokeapi.co/api/v2/pokemon
Body: empty</code></pre>
</div>
</div>
</section>
<section id="generate-a-response-by-performing-our-request-using-req_performrequest" class="level3">
<h3 class="anchored" data-anchor-id="generate-a-response-by-performing-our-request-using-req_performrequest">Generate a response by performing our request using <code>req_perform(request)</code></h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> <span class="fu">req_perform</span>(request)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s take a look at the contents of our raw response body:</p>
<div class="cell" data-out.lines="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>response<span class="sc">$</span>body</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   [1] 7b 22 63 6f 75 6e 74 22 3a 31 33 32 38 2c 22 6e 65 78 74 22 3a 22 68 74
  [25] 74 70 73 3a 2f 2f 70 6f 6b 65 61 70 69 2e 63 6f 2f 61 70 69 2f 76 32 2f
  [49] 70 6f 6b 65 6d 6f 6e 3f 6f 66 66 73 65 74 3d 32 30 26 6c 69 6d 69 74 3d
  [73] 32 30 22 2c 22 70 72 65 76 69 6f 75 73 22 3a 6e 75 6c 6c 2c 22 72 65 73
  [97] 75 6c 74 73 22 3a 5b 7b 22 6e 61 6d 65 22 3a 22 62 75 6c 62 61 73 61 75
 [121] 72 22 2c 22 75 72 6c 22 3a 22 68 74 74 70 73 3a 2f 2f 70 6f 6b 65 61 70
 [145] 69 2e 63 6f 2f 61 70 69 2f 76 32 2f 70 6f 6b 65 6d 6f 6e 2f 31 2f 22 7d
 [169] 2c 7b 22 6e 61 6d 65 22 3a 22 69 76 79 73 61 75 72 22 2c 22 75 72 6c 22
 [193] 3a 22 68 74 74 70 73 3a 2f 2f 70 6f 6b 65 61 70 69 2e 63 6f 2f 61 70 69
 [217] 2f 76 32 2f 70 6f 6b 65 6d 6f 6e 2f 32 2f 22 7d 2c 7b 22 6e 61 6d 65 22
....</code></pre>
</div>
</div>
<p>We see that our output is raw byte codes - as series of two character hexadecimal values. This is because we need to tell the <code>httr2</code> library to intepret the body as a <code>JSON</code>. We can use <code>glimpse()</code> to make our <code>JSON</code> output more readable.</p>
<div class="cell" data-out.lines="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>response <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">resp_body_json</span>() <span class="sc">|&gt;</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glimpse</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 4
 $ count   : int 1328
 $ next    : chr "https://pokeapi.co/api/v2/pokemon?offset=20&amp;limit=20"
 $ previous: NULL
 $ results :List of 20
  ..$ :List of 2
  .. ..$ name: chr "bulbasaur"
  .. ..$ url : chr "https://pokeapi.co/api/v2/pokemon/1/"
  ..$ :List of 2
  .. ..$ name: chr "ivysaur"
  .. ..$ url : chr "https://pokeapi.co/api/v2/pokemon/2/"
  ..$ :List of 2
  .. ..$ name: chr "venusaur"
  .. ..$ url : chr "https://pokeapi.co/api/v2/pokemon/3/"
  ..$ :List of 2
....</code></pre>
</div>
</div>
</section>
<section id="request-a-specific-pokemon-endpoint" class="level3">
<h3 class="anchored" data-anchor-id="request-a-specific-pokemon-endpoint">Request a specific pokemon endpoint</h3>
<ul>
<li>Define an endpoint for <strong>bulbasaur</strong></li>
<li>Perform the request</li>
<li>Display the response</li>
</ul>
<div class="cell" data-out.lines="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> <span class="fu">request</span>(base_url) <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req_url_path_append</span>(endpoint, <span class="st">'bulbasaur'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req_perform</span>() <span class="sc">|&gt;</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">resp_body_json</span>()</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>response <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 20
 $ abilities               :List of 2
  ..$ :List of 3
  .. ..$ ability  :List of 2
  .. ..$ is_hidden: logi FALSE
  .. ..$ slot     : int 1
  ..$ :List of 3
  .. ..$ ability  :List of 2
  .. ..$ is_hidden: logi TRUE
  .. ..$ slot     : int 3
 $ base_experience         : int 64
 $ cries                   :List of 2
  ..$ latest: chr "https://raw.githubusercontent.com/PokeAPI/cries/main/cries/pokemon/latest/1.ogg"
  ..$ legacy: chr "https://raw.githubusercontent.com/PokeAPI/cries/main/cries/pokemon/legacy/1.ogg"
 $ forms                   :List of 1
....</code></pre>
</div>
</div>
</section>
</section>
<section id="manipulating-json-data" class="level2">
<h2 class="anchored" data-anchor-id="manipulating-json-data">Manipulating <code>JSON</code> data</h2>
<section id="extract-data-from-a-json-into-a-tibble-dataframe" class="level3">
<h3 class="anchored" data-anchor-id="extract-data-from-a-json-into-a-tibble-dataframe">Extract data from a <code>JSON</code> into a tibble (dataframe)</h3>
<p><code>JSON</code> data is variably nested and can be difficult to work with. For example, what if we want to retrieve the stats for bulbasaur and format it like:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">Stat Name</th>
<th style="text-align: center;">Stat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">HP</td>
<td style="text-align: center;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">Attack</td>
<td style="text-align: center;">25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Defense</td>
<td style="text-align: center;">35</td>
</tr>
</tbody>
</table>
<p>We can see that stats are nested in a hierarchy of lists, and are difficult to retreive by name:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(response<span class="sc">$</span>stats)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 6
 $ :List of 3
  ..$ base_stat: int 45
  ..$ effort   : int 0
  ..$ stat     :List of 2
  .. ..$ name: chr "hp"
  .. ..$ url : chr "https://pokeapi.co/api/v2/stat/1/"
 $ :List of 3
  ..$ base_stat: int 49
  ..$ effort   : int 0
  ..$ stat     :List of 2
  .. ..$ name: chr "attack"
  .. ..$ url : chr "https://pokeapi.co/api/v2/stat/2/"
 $ :List of 3
  ..$ base_stat: int 49
  ..$ effort   : int 0
  ..$ stat     :List of 2
  .. ..$ name: chr "defense"
  .. ..$ url : chr "https://pokeapi.co/api/v2/stat/3/"
 $ :List of 3
  ..$ base_stat: int 65
  ..$ effort   : int 1
  ..$ stat     :List of 2
  .. ..$ name: chr "special-attack"
  .. ..$ url : chr "https://pokeapi.co/api/v2/stat/4/"
 $ :List of 3
  ..$ base_stat: int 65
  ..$ effort   : int 0
  ..$ stat     :List of 2
  .. ..$ name: chr "special-defense"
  .. ..$ url : chr "https://pokeapi.co/api/v2/stat/5/"
 $ :List of 3
  ..$ base_stat: int 45
  ..$ effort   : int 0
  ..$ stat     :List of 2
  .. ..$ name: chr "speed"
  .. ..$ url : chr "https://pokeapi.co/api/v2/stat/6/"</code></pre>
</div>
</div>
<p>One strategy is to iterate over all six outer lists, each of which corresponds to a single statistics, and then extract the relevant information from the inner lists.</p>
<p>We can do this using the <code>map_df()</code> function from the <code>purrr</code> library. The <code>map_df()</code> iterates, or “maps”, over each list, allows us to perform a function, and returns the result as a dataframe.</p>
<p>The function takes the form <code>map_df(my_list, ~ function(.x))</code> where the <code>~</code> represents an anonymous function that allows us to reference each list as <code>.x</code>.</p>
<p>We can extract all of the stats into a dataframe using:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>stats <span class="ot">&lt;-</span> <span class="fu">map_df</span>(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  response<span class="sc">$</span>stats,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span> <span class="fu">tibble</span>(<span class="at">stat_name =</span> .x<span class="sc">$</span>stat<span class="sc">$</span>name, <span class="at">stat =</span> .x<span class="sc">$</span>base_stat)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>which gives us:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>stats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  stat_name        stat
  &lt;chr&gt;           &lt;int&gt;
1 hp                 45
2 attack             49
3 defense            49
4 special-attack     65
5 special-defense    65
6 speed              45</code></pre>
</div>
</div>
<p>The rest of the data is easier to extract from <code>response</code>, so by using both our <code>stats</code> tibble we created, as well as the original <code>response</code>, we can create a tibble of bulbasaur stats:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>bulbasaur_stats <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">sprite =</span> response<span class="sc">$</span>sprites<span class="sc">$</span>front_default,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">species =</span> response<span class="sc">$</span>species<span class="sc">$</span>name,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">height =</span> response<span class="sc">$</span>height,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">weight =</span> response<span class="sc">$</span>weight,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">hp =</span> stats<span class="sc">$</span>stat[stats<span class="sc">$</span>stat_name <span class="sc">==</span> <span class="st">"hp"</span>],</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">defense =</span> stats<span class="sc">$</span>stat[stats<span class="sc">$</span>stat_name <span class="sc">==</span> <span class="st">"defense"</span>],</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">attack =</span> stats<span class="sc">$</span>stat[stats<span class="sc">$</span>stat_name <span class="sc">==</span> <span class="st">"attack"</span>])</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>bulbasaur_stats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  sprite                              species height weight    hp defense attack
  &lt;chr&gt;                               &lt;chr&gt;    &lt;int&gt;  &lt;int&gt; &lt;int&gt;   &lt;int&gt;  &lt;int&gt;
1 https://raw.githubusercontent.com/… bulbas…      7     69    45      49     49</code></pre>
</div>
</div>
</section>
</section>
<section id="pagination" class="level2">
<h2 class="anchored" data-anchor-id="pagination">Pagination</h2>
<section id="using-pagination-to-request-data-for-100-pokemon" class="level3">
<h3 class="anchored" data-anchor-id="using-pagination-to-request-data-for-100-pokemon">Using pagination to request data for 100 pokemon</h3>
<p>What if we want stats for more than one pokemon? We need to find some way of making multiple requests for each pokemon.</p>
<p>Let’s create a request for 20 pokemon. We can use <code>req_url_query()</code> to pass specific parameters to our get request; in this case we will pass <code>limit=20</code> to request 20 records:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>request <span class="ot">&lt;-</span> <span class="fu">request</span>(base_url) <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req_url_path_append</span>(<span class="st">'pokemon'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req_url_query</span>(<span class="at">limit =</span> <span class="dv">20</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>If we perform a single request, and examine it, we see an interesting attribute - <code>next</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>response <span class="ot">&lt;-</span> <span class="fu">req_perform</span>(request) <span class="sc">|&gt;</span> <span class="fu">resp_body_json</span>()</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>response<span class="sc">$</span><span class="st">`</span><span class="at">next</span><span class="st">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "https://pokeapi.co/api/v2/pokemon?offset=20&amp;limit=20"</code></pre>
</div>
</div>
<p>Next is delivered as part of our <code>JSON</code>. It tells us, if we wanted the next batch of records, exactly what API call we would need to make. We can think of these as a chain of API calls that allow us to iterate through all records available to us:</p>
<p><code>...okemon?offset=20&amp;limit=20"</code> -&gt; <code>...okemon?offset=40&amp;limit=20"</code> -&gt; <code>...okemon?offset=60&amp;limit=20"</code> …</p>
<p>and so on until we end up reaching the end, which we know is the end because <code>next == NULL</code> - there are no more records past the last API call.</p>
<p>So how do we request multiple pokemon stats? There are different strategies, which you will find is often the case when working with APIs. We will:</p>
<ol type="1">
<li>Use the <code>req_perform_iterative()</code> function to iterate over multiple batches of records until we have all 1,328 pokemon. Learn more about <a href="https://httr2.r-lib.org/reference/req_perform_iterative.html">req_perform_iterative</a>.</li>
<li>Create our own function, <code>req_paged_next()</code> which will help us update each step of <code>req_perform_iterative()</code> to use the next record available.</li>
<li>Iterate over all of the responses, and extract the name and url endpoint for each pokemon.</li>
<li>Create a function that generalizes the process of extracting pokemon statistics from a JSON, as we did with <strong>bulbasaur</strong>.</li>
<li>Using the list of pokemon URLs, make 1,328 API requests, one for each pokemon, and extract the statistics for each pokemon.</li>
</ol>
<p>We can extract all the pokemon using:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>responses <span class="ot">&lt;-</span> <span class="fu">req_perform_iterative</span>(</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    request,</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">next_req =</span> SOME_HELPER_FUNCTION,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">on_error =</span> <span class="st">"return"</span> <span class="co"># If request fails, stop and return what you have</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>next_req</code> take’s a function, with the arguments (<code>resp</code>, <code>req</code>).</p>
<p>Normally we could use one of the <code>httr2</code> provided <a href="https://httr2.r-lib.org/reference/iterate_with_offset.html">iteration helper</a> functions to help us iterate over.</p>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>These functions are intended for use with the <code>next_req</code> argument to <code>req_perform_iterative()</code>.<br>
Each implements iteration for a common pagination pattern:</p>
</div>
</div>
</div>
<ul>
<li><code>iterate_with_offset()</code> — increments a query parameter, e.g.&nbsp;<code>?page=1</code>, <code>?page=2</code>, or <code>?offset=1</code>, <code>offset=21</code>.</li>
<li><code>iterate_with_cursor()</code> — updates a query parameter with the value of a cursor found somewhere in the response.</li>
<li><code>iterate_with_link_url()</code> — follows the URL found in the <code>Link</code> header. See <code>resp_link_url()</code> for more details.</li>
</ul>
<p>The problem is, our <code>next</code> url is not included in the <code>Link</code> header, as is common, but is instead part of our <code>JSON</code>. This means we will need to write and provide a custom function to provide it to <code>req_perform_iterative</code>.</p>
</section>
<section id="lets-build-a-next-page-handler" class="level3">
<h3 class="anchored" data-anchor-id="lets-build-a-next-page-handler">Let’s build a next page handler</h3>
<p>Our next page handler takes two arguments, <code>resp</code> and <code>req</code>. These stand for response and request, respectively. We must use these abbreviations, because that is what the <code>req_perform_iterative</code> <code>next_req</code> argument expects.</p>
<p>Our next page handler does the following:</p>
<ol type="1">
<li>Extracts the JSON body: <code>resp_body_json(resp)</code></li>
<li>Grabs the next url <code>response_body$</code>next``</li>
<li>Checks if the next URL is NULL, and returns NULL if so. <code>if (is.null(next_url)){return(NULL)}</code></li>
<li>Otherwise updates the request with the new URL: <code>req |&gt; req_url(next_url)</code></li>
</ol>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>next_page_handler <span class="ot">&lt;-</span> <span class="cf">function</span>(resp, req) {</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  response_body <span class="ot">&lt;-</span> <span class="fu">resp_body_json</span>(resp)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  next_url <span class="ot">&lt;-</span> response_body<span class="sc">$</span><span class="st">`</span><span class="at">next</span><span class="st">`</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Error handling - if we get to a next that returns NULL</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## then we stop. Otherwise keep navigating through our </span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">## chain of next URLs.</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(next_url)) {</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    req <span class="sc">|&gt;</span> <span class="fu">req_url</span>(next_url)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We can avoid hitting any API limits by using <code>req_throttle()</code> in <code>request()</code> to ensure we never exceed a specified rate.</p>
<p>Throttling is implemented using a “token bucket”, which fills up to a maximum of capacity tokens over <code>fill_time_s</code> (fill time in seconds). Each time you make a request, it takes a token out of the bucket, and if the bucket is empty, the request will wait until the bucket refills. This ensures that you never make more than <code>capacity</code> requests in <code>fill_time_s</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>request <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="st">"https://pokeapi.co/api/v2/pokemon"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_url_query</span>(<span class="at">limit =</span> <span class="dv">20</span>) <span class="sc">|&gt;</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_throttle</span>(<span class="at">capacity =</span> <span class="dv">10</span>, <span class="at">fill_time_s =</span> <span class="dv">60</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now let’s get all the first 100 pokemon (by setting <code>max_reqs = 5</code>). We can get all the pokemon by setting <code>max_reqs = Inf</code>, but be cautious of API limits.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>responses <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">req_perform_iterative</span>(</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  request,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">next_req =</span> next_page_handler,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_reqs =</span> <span class="dv">5</span>,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">on_error =</span> <span class="st">"return"</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now we can use <code>map_dfr()</code> to iterate over each response and extract the results.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>pokemon_names <span class="ot">&lt;-</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_dfr</span>(responses, <span class="cf">function</span>(response) {</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    body <span class="ot">&lt;-</span> httr2<span class="sc">::</span><span class="fu">resp_body_json</span>(response)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map_dfr</span>(body<span class="sc">$</span>results, tibble<span class="sc">::</span>as_tibble)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>pokemon_names</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 100 × 2
   name       url                                  
   &lt;chr&gt;      &lt;chr&gt;                                
 1 bulbasaur  https://pokeapi.co/api/v2/pokemon/1/ 
 2 ivysaur    https://pokeapi.co/api/v2/pokemon/2/ 
 3 venusaur   https://pokeapi.co/api/v2/pokemon/3/ 
 4 charmander https://pokeapi.co/api/v2/pokemon/4/ 
 5 charmeleon https://pokeapi.co/api/v2/pokemon/5/ 
 6 charizard  https://pokeapi.co/api/v2/pokemon/6/ 
 7 squirtle   https://pokeapi.co/api/v2/pokemon/7/ 
 8 wartortle  https://pokeapi.co/api/v2/pokemon/8/ 
 9 blastoise  https://pokeapi.co/api/v2/pokemon/9/ 
10 caterpie   https://pokeapi.co/api/v2/pokemon/10/
# ℹ 90 more rows</code></pre>
</div>
</div>
</section>
<section id="retreive-statistics-for-each-pokemon-through-multiple-api-calls" class="level3">
<h3 class="anchored" data-anchor-id="retreive-statistics-for-each-pokemon-through-multiple-api-calls">Retreive statistics for each pokemon through multiple API calls</h3>
<p>In order to retrieve statsitics for each pokemon, we can iterate over each URL in <code>pokemon_names</code> and make a request for the specific pokemon endpoint represented by that url. To do this, we can build on our approach for extracting statistics from one pokemon, and build a function for multiple.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>get_pokemon_details <span class="ot">&lt;-</span> <span class="cf">function</span>(url) {</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  response <span class="ot">&lt;-</span> <span class="fu">request</span>(url) <span class="sc">|&gt;</span> <span class="fu">req_perform</span>() <span class="sc">|&gt;</span> <span class="fu">resp_body_json</span>()</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## We don't have ways to limit the number of requests over</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">## a given time period, so we can use Sys.sleep to pause our</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="do">## function before each request to ensure we don't exceed </span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="do">## API limits.</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(.<span class="dv">5</span>)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  stats <span class="ot">&lt;-</span> purrr<span class="sc">:::</span><span class="fu">map_df</span>(</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    response<span class="sc">$</span>stats,</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">tibble</span>(<span class="at">stat_name =</span> .x<span class="sc">$</span>stat<span class="sc">$</span>name, <span class="at">stat =</span> .x<span class="sc">$</span>base_stat)</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">sprite =</span> response<span class="sc">$</span>sprites<span class="sc">$</span>front_default,</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> response<span class="sc">$</span>name,</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> response<span class="sc">$</span>height,</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight =</span> response<span class="sc">$</span>weight,</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp =</span> stats<span class="sc">$</span>stat[stats<span class="sc">$</span>stat_name <span class="sc">==</span> <span class="st">"hp"</span>],</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">defense =</span> stats<span class="sc">$</span>stat[stats<span class="sc">$</span>stat_name <span class="sc">==</span> <span class="st">"defense"</span>],</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">attack =</span> stats<span class="sc">$</span>stat[stats<span class="sc">$</span>stat_name <span class="sc">==</span> <span class="st">"attack"</span>]</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>    <span class="do">## This mutate function wraps each sprite url in </span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>    <span class="do">## &lt;img src="SPRITE_URL"height="50"&gt;&lt;/img&gt; so it can</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>    <span class="do">## be displayed in an HTML table using the DT library</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">sprite =</span> <span class="fu">paste0</span>(<span class="st">'&lt;img src="'</span>, sprite, <span class="st">'" height="50"&gt;&lt;/img&gt;'</span>))</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now iterate over each pokemon URL and excecute the <code>get_pokemon_details</code> function to retrieve each pokemon’s statistics:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>pokemon_stats <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(pokemon_names<span class="sc">$</span>url, get_pokemon_details)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Finally, display our resultant table:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(<span class="at">data =</span> pokemon_stats, <span class="at">escape =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-60b0b9916efcf933deff" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-60b0b9916efcf933deff">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],["<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/1.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/2.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/3.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/4.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/5.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/6.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/7.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/8.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/9.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/10.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/11.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/12.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/13.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/14.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/15.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/16.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/17.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/18.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/19.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/20.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/21.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/22.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/23.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/24.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/26.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/27.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/28.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/29.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/30.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/31.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/32.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/33.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/34.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/35.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/36.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/37.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/38.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/39.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/40.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/41.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/42.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/43.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/44.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/45.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/46.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/47.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/48.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/49.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/50.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/51.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/52.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/53.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/54.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/55.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/56.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/57.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/58.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/59.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/60.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/61.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/62.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/63.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/64.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/65.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/66.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/67.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/68.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/69.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/70.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/71.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/72.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/73.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/74.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/75.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/76.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/77.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/78.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/79.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/80.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/81.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/82.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/83.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/84.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/85.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/86.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/87.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/88.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/89.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/90.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/91.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/92.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/93.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/94.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/95.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/96.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/97.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/98.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/99.png\" height=\"50\"><\/img>","<img src=\"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/100.png\" height=\"50\"><\/img>"],["bulbasaur","ivysaur","venusaur","charmander","charmeleon","charizard","squirtle","wartortle","blastoise","caterpie","metapod","butterfree","weedle","kakuna","beedrill","pidgey","pidgeotto","pidgeot","rattata","raticate","spearow","fearow","ekans","arbok","pikachu","raichu","sandshrew","sandslash","nidoran-f","nidorina","nidoqueen","nidoran-m","nidorino","nidoking","clefairy","clefable","vulpix","ninetales","jigglypuff","wigglytuff","zubat","golbat","oddish","gloom","vileplume","paras","parasect","venonat","venomoth","diglett","dugtrio","meowth","persian","psyduck","golduck","mankey","primeape","growlithe","arcanine","poliwag","poliwhirl","poliwrath","abra","kadabra","alakazam","machop","machoke","machamp","bellsprout","weepinbell","victreebel","tentacool","tentacruel","geodude","graveler","golem","ponyta","rapidash","slowpoke","slowbro","magnemite","magneton","farfetchd","doduo","dodrio","seel","dewgong","grimer","muk","shellder","cloyster","gastly","haunter","gengar","onix","drowzee","hypno","krabby","kingler","voltorb"],[7,10,20,6,11,17,5,10,16,3,7,11,3,6,10,3,11,15,3,7,3,12,20,35,4,8,6,10,4,8,13,5,9,14,6,13,6,11,5,10,8,16,5,8,12,3,10,10,15,2,7,4,10,8,17,5,10,7,19,6,10,13,9,13,15,8,15,16,7,10,17,9,16,4,10,14,10,17,12,16,3,10,8,14,18,11,17,9,12,3,15,13,16,15,88,10,16,4,13,5],[69,130,1000,85,190,905,90,225,855,29,99,320,32,100,295,18,300,395,35,185,20,380,69,650,60,300,120,295,70,200,600,90,195,620,75,400,99,199,55,120,75,550,54,86,186,54,295,300,125,8,333,42,320,196,766,280,320,190,1550,124,200,540,195,565,480,195,705,1300,40,64,155,455,550,200,1050,3000,300,950,360,785,60,600,150,392,852,900,1200,300,300,40,1325,1,1,405,2100,324,756,65,600,104],[45,60,80,39,58,78,44,59,79,45,50,60,40,45,65,40,63,83,30,55,40,65,35,60,35,60,50,75,55,70,90,46,61,81,70,95,38,73,115,140,40,75,45,60,75,35,60,60,70,10,35,40,65,50,80,40,65,55,90,40,65,90,25,40,55,70,80,90,50,65,80,40,80,40,55,80,50,65,90,95,25,50,52,35,60,65,90,80,105,30,50,30,45,60,35,60,85,30,55,40],[49,63,83,43,58,78,65,80,100,35,55,50,30,50,40,40,55,75,35,60,30,65,44,69,40,55,85,110,52,67,87,40,57,77,48,73,40,75,20,45,35,70,55,70,85,55,80,50,60,25,50,35,60,48,78,35,60,45,80,40,65,95,15,30,45,50,70,80,35,50,65,35,65,100,115,130,55,70,65,110,70,95,55,45,70,55,80,50,75,100,180,30,45,60,160,45,70,90,115,50],[49,62,82,52,64,84,48,63,83,30,20,45,35,25,90,45,60,80,56,81,60,90,60,95,55,90,75,100,47,62,92,57,72,102,45,70,41,76,45,70,45,80,50,65,80,70,95,55,65,55,100,45,70,52,82,80,105,70,110,50,65,95,20,35,50,80,100,130,75,90,105,40,70,80,95,120,85,100,65,75,35,60,90,85,110,45,70,80,105,65,95,35,50,65,45,48,73,105,130,30]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>sprite<\/th>\n      <th>name<\/th>\n      <th>height<\/th>\n      <th>weight<\/th>\n      <th>hp<\/th>\n      <th>defense<\/th>\n      <th>attack<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5,6,7]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"sprite","targets":1},{"name":"name","targets":2},{"name":"height","targets":3},{"name":"weight","targets":4},{"name":"hp","targets":5},{"name":"defense","targets":6},{"name":"attack","targets":7}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="api-key-privacy" class="level2">
<h2 class="anchored" data-anchor-id="api-key-privacy">API key privacy</h2>
<p>What if you are working with an API that requires an API key?</p>
<p>For example, let’s use the NASA API to retreive weather data on mars:</p>
<p>This API is a little different. We have to specify our data type (JSON) and our API version (1.0) as parameters in our GET request:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>nasa_base_url <span class="ot">&lt;-</span> <span class="st">'https://api.nasa.gov/'</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>req <span class="ot">&lt;-</span> <span class="fu">request</span>(nasa_base_url) <span class="sc">|&gt;</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_url_path_append</span>(<span class="st">'insight_weather/'</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_url_query</span>(<span class="at">feedtype =</span> <span class="st">"json"</span>, <span class="at">ver =</span> <span class="st">"1.0"</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `req_perform()`:
! HTTP 403 Forbidden.</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>req</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<pre><code>Error: object 'req' not found</code></pre>
</div>
</div>
<p>We see that when we run it, we get a 403 HTTP error. We are not considered a valid user unless we provide an API key.</p>
<p>You can register for an API key with nothing but an email at <a href="https://api.nasa.gov/">https://api.nasa.gov/</a>, or we can use the demo key that NASA provides for experimenting with their API (although it does have lower API limits than if you use your own key).</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>api_key <span class="ot">&lt;-</span> <span class="st">'DEMO_KEY'</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>req <span class="ot">&lt;-</span> <span class="fu">request</span>(nasa_base_url) <span class="sc">|&gt;</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_url_path_append</span>(<span class="st">'insight_weather/'</span>) <span class="sc">|&gt;</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_url_query</span>(<span class="at">feedtype =</span> <span class="st">"json"</span>, <span class="at">ver =</span> <span class="st">"1.0"</span>, <span class="at">api_key =</span> api_key) <span class="sc">|&gt;</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>()</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>req</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;httr2_response&gt;
GET https://api.nasa.gov/insight_weather/?feedtype=json&amp;ver=1.0&amp;api_key=DEMO_KEY
Status: 200 OK
Content-Type: application/json
Body: In memory (36505 bytes)</code></pre>
</div>
</div>
<p>Now that we passed the <code>api_key</code> as a parameter, we received a valid response (HTTP 200).</p>
<p>We don’t want to store that API key in plaintext though - anyone could steal it! Let’s store it as an environmental variable. To do that, you can add it to your <code>.Renviron</code> file in your home directory.</p>
<p>You can use an R package to edit that file directly in RStudio: <code>usethis</code>.</p>
<p><code>usethis</code> is a workflow package: it automates repetitive tasks that arise during project setup and development, both for R packages and non-package projects.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usethis)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">edit_r_environ</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>☐ Edit '/Users/plawson/.Renviron'.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>☐ Restart R for changes to take effect.</code></pre>
</div>
</div>
<p>An editor window will open, and you can add the following (replacing <code>"DEMO_KEY"</code> with your own API key, if you registered for one)</p>
<p><code>API_KEY = "DEMO_KEY"</code></p>
<p>Now you can load your API key from your <code>.Renviron</code> file by first restarting R, and then:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>api_key <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"API_KEY"</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>nasa_base_url <span class="ot">&lt;-</span> <span class="st">'https://api.nasa.gov/'</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>req <span class="ot">&lt;-</span> <span class="fu">request</span>(nasa_base_url) <span class="sc">|&gt;</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_url_path_append</span>(<span class="st">'insight_weather/'</span>) <span class="sc">|&gt;</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_url_query</span>(<span class="at">feedtype =</span> <span class="st">"json"</span>, <span class="at">ver =</span> <span class="st">"1.0"</span>, <span class="at">api_key =</span> api_key) <span class="sc">|&gt;</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>()</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>req</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;httr2_response&gt;
GET https://api.nasa.gov/insight_weather/?feedtype=json&amp;ver=1.0&amp;api_key=DEMO_KEY
Status: 200 OK
Content-Type: application/json
Body: In memory (36505 bytes)</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, JHU Data Services.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>This site was built with ❤️ and <strong><a href="https://quarto.org/">Quarto</a></strong>.</p>
</div>
  </div>
</footer>




</body></html>